# Form 表单

用来收集数据的组件集合

## 何时使用

当系统需要收集、录入时

常见于调查问卷、登录、新建/编辑、设置等场景

## 对齐方式

import DemoAlign from '../../demo/form/section-align.jsx'

<DemoAlign />

## 填充表单

import DemoFillform from '../../demo/form/section-fillform.jsx'

<DemoFillform />

## 横向表单

import DemoRow from '../../demo/form/section-row.jsx'

<DemoRow />

## 组合表单

import DemoSynthetic from '../../demo/form/section-synthetic.jsx'

<DemoSynthetic />

## SchemaForm

import DemoSchema from '../../demo/form/section-schema.jsx'

<DemoSchema />

## useForm

import DemoUseForm from '../../demo/form/section-useForm.jsx'

<DemoUseForm />

## 表单验证常用用法

import DemoRules from '../../demo/form/section-rules.jsx'

<DemoRules />

## 双列表单

import DemoTwoCol from '../../demo/form/section-two-col.jsx'

<DemoTwoCol />

## 表单验证

import DemoCheck from '../../demo/form/section-check.jsx'

<DemoCheck />

## Props

### Form

| 参数           | 说明                                                                                  | 类型                               | 可选值                     | 默认值     |
| -------------- | ------------------------------------------------------------------------------------- | ---------------------------------- | -------------------------- | ---------- |
| initialValues  | 表单默认值，只有初始化以及重置时生效                                                  | object                             | -                          | -          |
| rules          | 表单验证规则，用法参考 [async-validator](https://github.com/yiminghe/async-validator) | object                             | -                          | -          |
| labelWidth     | label 宽度，可用任意 CSS 长度单位                                                     | string                             |                            |
| labelPlacement | label 放置的位置                                                                      | string                             | 'right' \| 'left' \| 'top' | 'left'     |
| placement      | 是否横向排列                                                                          | string                             | 'horizontal' \| 'vertical' | 'vertical' |
| showColon      | 是否显示冒号                                                                          | boolean                            | true \| false              | true       |
| onValuesChange | 字段值更新时触发回调事件                                                              | Function(changedValues, allValues) | -                          | -          |
| readOnly       | 只读，不可编辑表单内容                                                                | Boolean                            | true \| false              | false      |

### SchemaForm

> 继承 Form API

| 参数   | 说明                 | 类型         | 可选值 | 默认值 |
| ------ | -------------------- | ------------ | ------ | ------ |
| schema | 通过 schema 渲染表单 | SchemaItem[] | -      | -      |

### Form.Item

| 参数          | 说明                                                                                                            | 类型    | 可选值        | 默认值  |
| ------------- | --------------------------------------------------------------------------------------------------------------- | ------- | ------------- | ------- |
| field         | 表单域对应 model 的字段                                                                                         | string  | -             | -       |
| label         | 标签文本，默认自动添加冒号                                                                                      | string  | -             | -       |
| labelWidth    | label 宽度，可用任意 CSS 长度单位，优先级高于 Form 设置的 labelWidth                                            | string  |               |
| required      | 是否必填                                                                                                        | boolean | true \| false | false   |
| showColon     | 是否显示冒号                                                                                                    | boolean | true \| false | -       |
| rules         | 表单验证规则，会覆盖 Form 设置的 rules，用法参考 [async-validator](https://github.com/yiminghe/async-validator) | object  | -             | -       |
| valuePropName | 子节点的值的属性，如 Switch Radio Checkbox 的是 'checked'                                                       | string  | -             | 'value' |

### SchemaItem

> 继承 Form.Item API

| 参数           | 说明           | 类型   | 可选值 | 默认值 |
| -------------- | -------------- | ------ | ------ | ------ |
| component      | 用于渲染的组件 | string | -      | -      |
| componentProps | 组件的属性     | string | -      | -      |

### Form.Submit

> 继承 Button API

| 参数     | 说明                                                           | 类型     | 可选值 | 默认值    |
| -------- | -------------------------------------------------------------- | -------- | ------ | --------- |
| onClick  | 点击提交后触发 Function(value: Object, errors: Object) => void | Function | -      | func.noop |
| validate | 需要校验的 field 数组                                          | Array    | -      | -         |

### Form.Reset

> 继承 Button API

| 参数      | 说明                                                           | 类型     | 默认值    |
| --------- | -------------------------------------------------------------- | -------- | --------- |
| onClick   | 点击提交后触发 Function(value: Object, errors: Object) => void | Function | func.noop |
| fields    | 自定义重置的字段                                               | Array    | -         |
| toDefault | 返回默认值                                                     | Boolean  | true      |

## Methods

| 方法名                                                  | 说明               |
| ------------------------------------------------------- | ------------------ |
| validate(callback: isValid => void)                     | 对整个表单进行校验 |
| validateField(field: string, callback: isValid => void) | 对表单字段进行校验 |
| resetValidates()                                        | 重置整个表单的验证 |
| setFieldsValue()                                        | 设置表单的值       |

## rules

| 名称       | 说明                                                                                                                        | 类型                              |
| ---------- | --------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| enum       | 是否匹配枚举中的值                                                                                                          | any[]                             |
| len        | string 类型时为字符串长度；number 类型时为确定数字； array 类型时为数组长度                                                 | number                            |
| max        | 必须设置 `type`：string 类型为字符串最大长度；number 类型时为最大值；array 类型时为数组最大长度                             | number                            |
| message    | 错误信息，不设置时会通过[模板](#validateMessages)自动生成                                                                   | string                            |
| min        | 必须设置 `type`：string 类型为字符串最小长度；number 类型时为最小值；array 类型时为数组最小长度                             | number                            |
| pattern    | 正则表达式匹配                                                                                                              | RegExp                            |
| required   | 是否为必选字段                                                                                                              | boolean                           |
| transform  | 将字段值转换成目标值后进行校验                                                                                              | (value) => any                    |
| type       | 类型，常见有 `string` \|`number` \|`boolean` \| `email`。更多请参考[此处](https://github.com/yiminghe/async-validator#type) | string                            |
| validator  | 自定义校验，接收 Promise 作为返回值。[示例](#components-form-demo-register)参考                                             | ([rule](#Rule), value) => Promise |
| whitespace | 如果字段仅包含空格则校验不通过                                                                                              | boolean                           |
