# Form 表单

用来收集数据的组件集合

## 何时使用

当系统需要收集、录入时

常见于调查问卷、登录、新建/编辑、设置等场景

## 对齐方式

import DemoAlign from '../../demo/form/section-align.jsx'

<DemoAlign />

## 表单验证

import DemoCheck from '../../demo/form/section-check.jsx'

<DemoCheck />

## 字段嵌套

import DemoField from '../../demo/form/section-field.jsx'

<DemoField />

## 填充表单

import DemoFillform from '../../demo/form/section-fillform.jsx'

<DemoFillform />

## 表单联动

import DemoRegister from '../../demo/form/section-register.jsx'

<DemoRegister />

## 动态 Form 删减表单项

import Demolist from '../../demo/form/section-list.jsx'

<Demolist />

## 动态 Form 删减嵌套表单项

import DemoObjectlist from '../../demo/form/section-object-list.jsx'

<DemoObjectlist />

## 横向表单

import DemoRow from '../../demo/form/section-row.jsx'

<DemoRow />

## 表单查询

import DemoQuery from '../../demo/form/section-query.jsx'

<DemoQuery />

## 动态表单

import DemoDynamic from '../../demo/form/section-dynamic.jsx'

<DemoDynamic />

## 组合表单

import DemoSynthetic from '../../demo/form/section-synthetic.jsx'

<DemoSynthetic />

## 表单验证快捷用法

import DemoRules from '../../demo/form/section-rules.jsx'

<DemoRules />

## 双列表单

import DemoTwoCol from '../../demo/form/section-two-col.jsx'

<DemoTwoCol />

## SchemaForm

import DemoSchema from '../../demo/form/section-schema.jsx'

<DemoSchema />

## SchemaForm 动态表单

import DemoSchemaDynamic from '../../demo/form/section-schema-dynamic.jsx'

<DemoSchemaDynamic />

## SchemaForm 与 Form.Item 的混用

import DemoSchemaMix from '../../demo/form/section-schemaMix.jsx'

<DemoSchemaMix />

## useForm

import DemoUseForm from '../../demo/form/section-useForm.jsx'

<DemoUseForm />

## Props

### Form

| 参数           | 说明                                                                                  | 类型                               | 可选值                     | 默认值     |
| -------------- | ------------------------------------------------------------------------------------- | ---------------------------------- | -------------------------- | ---------- |
| initialValues  | 表单默认值，只有初始化以及重置时生效                                                  | object                             | -                          | -          |
| rules          | 表单验证规则，用法参考 [async-validator](https://github.com/yiminghe/async-validator) | object                             | -                          | -          |
| labelWidth     | label 宽度，可用任意 CSS 长度单位                                                     | string                             |                            |
| labelPlacement | label 放置的位置                                                                      | string                             | 'right' \| 'left' \| 'top' | 'left'     |
| placement      | 是否横向排列                                                                          | string                             | 'horizontal' \| 'vertical' | 'vertical' |
| showColon      | 是否显示冒号                                                                          | boolean                            | true \| false              | true       |
| onValuesChange | 字段值更新时触发回调事件                                                              | Function(changedValues, allValues) | -                          | -          |
| readOnly       | 只读，不可编辑表单内容                                                                | Boolean                            | true \| false              | false      |

### SchemaForm

> 继承 Form API

| 参数   | 说明                 | 类型         | 可选值 | 默认值 |
| ------ | -------------------- | ------------ | ------ | ------ |
| schema | 通过 schema 渲染表单 | SchemaItem[] | -      | -      |
| submit | 继承 Form.Submit API | Object       | -      | -      |
| reset  | 继承 Form.Reset API  | Object       | -      | -      |

### FormList

| 参数     | 说明     | 类型                                                             | 可选值 | 默认值 |
| -------- | -------- | ---------------------------------------------------------------- | ------ | ------ |
| name     | 列表名称 | String                                                           | -      | -      |
| children | 渲染函数 | (fields: Field[], operation: { add, remove }) => React.ReactNode | -      | -      |

### Form.Item

| 参数            | 说明                                                                                                            | 类型    | 可选值                       | 默认值   |
| --------------- | --------------------------------------------------------------------------------------------------------------- | ------- | ---------------------------- | -------- |
| field           | 字段名，支持数组                                                                                                | string  | (string)[]                   | -        | - |
| label           | 标签文本，默认自动添加冒号                                                                                      | string  | -                            | -        |
| labelWidth      | label 宽度，可用任意 CSS 长度单位，优先级高于 Form 设置的 labelWidth                                            | string  |                              |
| required        | 是否必填                                                                                                        | boolean | true \| false                | false    |
| showColon       | 是否显示冒号                                                                                                    | boolean | true \| false                | -        |
| rules           | 表单验证规则，会覆盖 Form 设置的 rules，用法参考 [async-validator](https://github.com/yiminghe/async-validator) | object  | -                            | -        |
| valuePropName   | 子节点的值的属性，如 Switch Radio Checkbox 的是 'checked'                                                       | string  | -                            | 'value'  |
| contentPosition | 指定显示内容的位置的位置，对一些非 HiUI 表单组件进行设置                                                        | string  | 'top' \| 'center' \|'bottom' | 'center' |

### SchemaItem

> 继承 Form.Item API

| 参数           | 说明           | 类型   | 可选值 | 默认值 |
| -------------- | -------------- | ------ | ------ | ------ |
| component      | 用于渲染的组件 | string | -      | -      |
| componentProps | 组件的属性     | string | -      | -      |

### Form.Submit

> 继承 Button API

| 参数     | 说明                                                           | 类型     | 可选值 | 默认值    |
| -------- | -------------------------------------------------------------- | -------- | ------ | --------- |
| onClick  | 点击提交后触发 Function(value: Object, errors: Object) => void | Function | -      | func.noop |
| validate | 需要校验的 field 数组                                          | Array    | -      | -         |

### Form.Reset

> 继承 Button API

| 参数      | 说明                      | 类型     | 默认值    |
| --------- | ------------------------- | -------- | --------- |
| onClick   | 点击提交后触发 () => void | Function | func.noop |
| fields    | 自定义重置的字段          | Array    | -         |
| toDefault | 返回默认值                | Boolean  | true      |

## Methods

| 方法名                                                 | 说明               |
| ------------------------------------------------------ | ------------------ |
| validate(callback: isValid => void)                    | 对整个表单进行校验 |
| validateField(field: string, callback: errors => void) | 对表单字段进行校验 |
| resetValidates()                                       | 重置整个表单的验证 |
| setFieldsValue()                                       | 设置表单的值       |

## rules

> [更多规则](https://github.com/yiminghe/async-validator)

| 名称       | 说明                                                                                                                        | 类型                          |
| ---------- | --------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
| enum       | 是否匹配枚举中的值                                                                                                          | any[]                         |
| len        | string 类型时为字符串长度；number 类型时为确定数字； array 类型时为数组长度                                                 | number                        |
| max        | 必须设置 `type`：string 类型为字符串最大长度；number 类型时为最大值；array 类型时为数组最大长度                             | number                        |
| message    | 错误信息                                                                                                                    | string                        |
| min        | 必须设置 `type`：string 类型为字符串最小长度；number 类型时为最小值；array 类型时为数组最小长度                             | number                        |
| pattern    | 正则表达式匹配                                                                                                              | RegExp                        |
| required   | 是否为必选字段                                                                                                              | boolean                       |
| transform  | 将字段值转换成目标值后进行校验                                                                                              | (value) => any                |
| type       | 类型，常见有 `string` \|`number` \|`boolean` \| `email`。更多请参考[此处](https://github.com/yiminghe/async-validator#type) | string                        |
| validator  | 自定义校验                                                                                                                  | (rule,value,callback) => void |
| whitespace | 如果字段仅包含空格则校验不通过                                                                                              | boolean                       |

### NamePath

string | (string)[]
